!function(t){function e(e,a,o){var d=t(e).find(" div."+a+"-container");d.find("label").html(o.name);var s="radio"===o.type?"radio":"drop-down";d.append(r[s]);var c=d.find(".image-selector"),l=t(e+" img.image-"+a),u=t(e+" img.image-"+a+"-legend"),f=o.images;"radio"===s?(n(c,l,u,f),c.parent().removeClass("four").addClass("twelve"),d.find(".filler-container").hide()):i(c,l,u,f),1===o.images.length&&d.hide()}function n(e,n,i,o){var r=a(o.length);t.each(o,function(){var a=t("<label />").addClass(r);a.append(t('<input type="radio" name="sl" />').val(this.source).data("alt",this.alt).data("legend",this.legend).data("legend-alt",this["legend-alt"])),a.append(t('<span class="label-body" />').text(this.name)),e.append(a),this["default"]&&(t('input[name=sl][value="'+this.source+'"]').prop("checked",!0),a.addClass("on"),n.attr("alt",this.alt).attr("title",this.alt),i.attr("src",this.legend).attr("alt",this["legend-alt"]).attr("title",this["legend-alt"])),a.click(function(){t(this).siblings().removeClass("on"),t(this).addClass("on")})}),e.on("change",function(){var e=t("input[name='sl']:checked");n.attr("src",e.val()).attr("alt",e.data("alt")).attr("title",e.data("alt")),i.attr("src",e.data("legend")).attr("alt",e.data("legendAlt")).attr("title",e.data("legendAlt"))})}function a(t){var e="nem-mcw-button-";switch(t){case 1:e+="whole";break;case 2:e+="half";break;case 3:e+="third";break;case 4:e+="fourth";break;case 5:e+="fifth";break;default:e+="default"}return e}function i(e,n,a,i){t.each(i,function(){e.append(t("<option />").val(this.source).text(this.name).data("alt",this.alt).data("legend",this.legend).data("legend-alt",this["legend-alt"])),this["default"]&&(e.val(this.source),n.attr("alt",this.alt).attr("title",this.alt),a.attr("src",this.legend).attr("alt",this["legend-alt"]).attr("title",this["legend-alt"]))}),e.on("change",function(){n.attr("src",t(this).val()).attr("alt",t(this).data("alt")).attr("title",t(this).data("alt")),a.attr("src",t(this).data("legend")).attr("alt",t(this).data("legendAlt")).attr("title",t(this).data("legendAlt"))})}function o(t){var e=t.leftSelector,n=t.rightSelector,a='<div class="nem-mcw-container main-container" style="display: none;"><div class="nem-mcw-row">';return e&&(a+='<div class="four nem-mcw-columns left-container"><label></label></div>'),(e&&"radio"===e.type||n&&"radio"===n.type)&&(a+='<div class="four nem-mcw-columns filler-container"></div>'),n&&(a+='<div class="four nem-mcw-columns right-container"><label></label></div>'),a+='</div><div class="nem-mcw-row"><div class="twelve nem-mcw-columns twentytwenty-container"><div class="image-slider">',e&&(a+='<img class="image-left twentytwenty-before" />'),n&&(a+='<img class="image-right twentytwenty-after" />'),e&&n&&(a+='<div class="fader"></div>'),a+="</div>",e&&e.images[0].legend&&(a+='<img class="image-left-legend twentytwenty-legend" />'),n&&n.images[0].legend&&(a+='<img class="image-right-legend twentytwenty-legend" />'),a+="</div></div></div>"}t.widget("nemac.mapCompare",{options:{config:{}},_create:function(){this.element.empty();var e=this,n="#"+t(this.element).attr("id");"string"==typeof this.options.config?t.getJSON(this.options.config,function(t){e.element.html(o(t)),e._deployApp(t,n)}):(this.element.html(o(this.options.config)),this._deployApp(this.options.config,n))},_deployApp:function(n,a){n.leftSelector&&e(a,"left",n.leftSelector),n.rightSelector&&e(a,"right",n.rightSelector),t(a).find(".image-selector").trigger("change"),"fade"===n.type?(t(a).find(".fader").append('<label>slide to compare</label><br /><input type="range" min="0" max="1" step="0.01" value="'+n.defaultSlidePosition+'" />'),t(a).find(".fader").val("0").on("input change",function(e){t(a).find(".image-left").css("opacity",1-e.target.value)}),t(a).find(".image-left").css("opacity",1-n.defaultSlidePosition)):setTimeout(function(){t(a).find(".image-slider").twentytwenty({default_offset_pct:n.defaultSlidePosition})},300),t(a).find("div.main-container").show()}});var r={radio:'<form class="image-selector"></form>',"drop-down":'<select class="nem-mcw-u-full-width image-selector"></select>'};t.fn.twentytwenty=function(e){var e=t.extend({default_offset_pct:.5,orientation:"horizontal"},e);return this.each(function(){var n=e.default_offset_pct,a=t(this),i=e.orientation,o="vertical"===i?"down":"left",r="vertical"===i?"up":"right";a.wrap("<div class='twentytwenty-wrapper twentytwenty-"+i+"'></div>"),a.append("<div class='twentytwenty-overlay'></div>");var d=a.find("img:first"),s=a.find("img:last");a.append("<div class='twentytwenty-handle'></div>");var c=a.find(".twentytwenty-handle");c.append("<span class='twentytwenty-"+o+"-arrow'></span>"),c.append("<span class='twentytwenty-"+r+"-arrow'></span>"),a.addClass("twentytwenty-container"),d.addClass("twentytwenty-before"),s.addClass("twentytwenty-after");var l=a.find(".twentytwenty-overlay");l.append("<div class='twentytwenty-before-label'></div>"),l.append("<div class='twentytwenty-after-label'></div>");var u=function(t){var e=d.width(),n=d.height();return{w:e+"px",h:n+"px",cw:t*e+"px",ch:t*n+"px"}},f=function(t){"vertical"===i?d.css("clip","rect(0,"+t.w+","+t.ch+",0)"):d.css("clip","rect(0,"+t.cw+","+t.h+",0)"),a.css("height",t.h)},m=function(t){var e=u(t);c.css("vertical"===i?"top":"left","vertical"===i?e.ch:e.cw),f(e)};t(window).on("resize.twentytwenty",function(t){m(n)});var g=0,p=0;c.on("movestart",function(t){(t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==i?t.preventDefault():(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===i&&t.preventDefault(),a.addClass("active"),g=a.offset().left,offsetY=a.offset().top,p=d.width(),imgHeight=d.height()}),c.on("moveend",function(t){a.removeClass("active")}),c.on("move",function(t){a.hasClass("active")&&(n="vertical"===i?(t.pageY-offsetY)/imgHeight:(t.pageX-g)/p,0>n&&(n=0),n>1&&(n=1),m(n))}),a.find("img").on("mousedown",function(t){t.preventDefault()}),t(window).trigger("resize.twentytwenty")})},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){function n(t){function e(t){a?(n(),P(e),i=!0,a=!1):i=!1}var n=t,a=!1,i=!1;this.kick=function(t){a=!0,i||e()},this.end=function(t){var e=n;t&&(i?(n=a?function(){e(),t()}:t,a=!0):t())}}function a(){return!0}function i(){return!1}function o(t){t.preventDefault()}function r(t){H[t.target.tagName.toLowerCase()]||t.preventDefault()}function d(t){return 1===t.which&&!t.ctrlKey&&!t.altKey}function s(t,e){var n,a;if(t.identifiedTouch)return t.identifiedTouch(e);for(n=-1,a=t.length;++n<a;)if(t[n].identifier===e)return t[n]}function c(t,e){var n=s(t.changedTouches,e.identifier);if(n&&(n.pageX!==e.pageX||n.pageY!==e.pageY))return n}function l(t){var e;d(t)&&(e={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:t.timeStamp},j(document,K.move,u,e),j(document,K.cancel,f,e))}function u(t){var e=t.data;w(t,e,t,m)}function f(t){m()}function m(){N(document,K.move,u),N(document,K.cancel,f)}function g(t){var e,n;H[t.target.tagName.toLowerCase()]||(e=t.changedTouches[0],n={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:t.timeStamp,identifier:e.identifier},j(document,L.move+"."+e.identifier,p,n),j(document,L.cancel+"."+e.identifier,v,n))}function p(t){var e=t.data,n=c(t,e);n&&w(t,e,n,h)}function v(t){var e=t.data,n=s(t.changedTouches,e.identifier);n&&h(e.identifier)}function h(t){N(document,"."+t,p),N(document,"."+t,v)}function w(t,e,n,a){var i=n.pageX-e.startX,o=n.pageY-e.startY;R*R>i*i+o*o||X(t,e,n,i,o,a)}function y(){return this._handled=a,!1}function Y(t){t._handled()}function X(t,e,n,a,i,o){var r,d;e.target;r=t.targetTouches,d=t.timeStamp-e.timeStamp,e.type="movestart",e.distX=a,e.distY=i,e.deltaX=a,e.deltaY=i,e.pageX=n.pageX,e.pageY=n.pageY,e.velocityX=a/d,e.velocityY=i/d,e.targetTouches=r,e.finger=r?r.length:1,e._handled=y,e._preventTouchmoveDefault=function(){t.preventDefault()},O(e.target,e),o(e.identifier)}function b(t){var e=t.data.timer;t.data.touch=t,t.data.timeStamp=t.timeStamp,e.kick()}function S(t){var e=t.data.event,n=t.data.timer;T(),x(e,n,function(){setTimeout(function(){N(e.target,"click",i)},0)})}function T(t){N(document,K.move,b),N(document,K.end,S)}function k(t){var e=t.data.event,n=t.data.timer,a=c(t,e);a&&(t.preventDefault(),e.targetTouches=t.targetTouches,t.data.touch=a,t.data.timeStamp=t.timeStamp,n.kick())}function _(t){var e=t.data.event,n=t.data.timer,a=s(t.changedTouches,e.identifier);a&&(C(e),x(e,n))}function C(t){N(document,"."+t.identifier,k),N(document,"."+t.identifier,_)}function A(t,e,n,a){var i=n-t.timeStamp;t.type="move",t.distX=e.pageX-t.startX,t.distY=e.pageY-t.startY,t.deltaX=e.pageX-t.pageX,t.deltaY=e.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/i,t.velocityY=.3*t.velocityY+.7*t.deltaY/i,t.pageX=e.pageX,t.pageY=e.pageY}function x(t,e,n){e.end(function(){return t.type="moveend",O(t.target,t),n&&n()})}function D(t,e,n){return j(this,"movestart.move",Y),!0}function q(t){return N(this,"dragstart drag",o),N(this,"mousedown touchstart",r),N(this,"movestart",Y),!0}function F(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(j(this,"dragstart."+t.guid+" drag."+t.guid,o,e,t.selector),j(this,"mousedown."+t.guid,r,e,t.selector))}function z(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(N(this,"dragstart."+t.guid+" drag."+t.guid),N(this,"mousedown."+t.guid))}var R=6,j=t.event.add,N=t.event.remove,O=function(e,n,a){t.event.trigger(n,a,e)},P=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(function(){t()},25)}}(),H={textarea:!0,input:!0,select:!0,button:!0},K={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},L={move:"touchmove",cancel:"touchend",end:"touchend"};t.event.special.movestart={setup:D,teardown:q,add:F,remove:z,_default:function(t){function a(e){A(o,r.touch,r.timeStamp),O(t.target,o)}var o,r;t._handled()&&(o={target:t.target,startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,timeStamp:t.timeStamp,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},r={event:o,timer:new n(a),touch:e,timeStamp:e},t.identifier===e?(j(t.target,"click",i),j(document,K.move,b,r),j(document,K.end,S,r)):(t._preventTouchmoveDefault(),j(document,L.move+"."+t.identifier,k,r),j(document,L.end+"."+t.identifier,_,r)))}},t.event.special.move={setup:function(){j(this,"movestart.move",t.noop)},teardown:function(){N(this,"movestart.move",t.noop)}},t.event.special.moveend={setup:function(){j(this,"movestart.moveend",t.noop)},teardown:function(){N(this,"movestart.moveend",t.noop)}},j(document,"mousedown.move",l),j(document,"touchstart.move",g),"function"==typeof Array.prototype.indexOf&&!function(t,e){for(var n=["changedTouches","targetTouches"],a=n.length;a--;)-1===t.event.props.indexOf(n[a])&&t.event.props.push(n[a])}(t)})}(jQuery);